(()=>{(function(){"use strict";var f=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",[e("header",{staticClass:"k-section-header"},[e("h2",{staticClass:"k-headline"},[t._v(t._s(t.label))])]),t.currentRedirects.length>0?[e("table",{staticClass:"k-redirects"},[t._m(0),t._l(t.currentRedirects,function(s){return e("tbody",{key:s},[s.langCode==t.currentLang&&s.destId==t.pageUuid?[e("tr",[e("td",{staticClass:"column-from"},[e("pre",[t._v(t._s(s.from))])]),e("td",{staticClass:"column-to"},[e("pre",[t._v(t._s(s.to))])]),e("td",{staticClass:"column-code"},[e("pre",[t._v(t._s(s.code))])]),e("td",[e("button",{staticClass:"k-button",attrs:{title:"Options",type:"button"},on:{click:function(a){return t.deleteRedirect(s.redirectId)}}},[e("span",{staticClass:"k-button-icon k-icon k-icon-remove",attrs:{"aria-label":"Options",role:"img"}},[e("svg",{attrs:{viewBox:"0 0 16 16"}},[e("use",{attrs:{"xlink:href":"#icon-remove"}})])]),e("span",{staticClass:"k-button-text"},[t._v(" Remove ")])])])])]:t._e()],2)})],2)]:t._e(),t.currentRedirects.length==0?e("section",[e("div",{staticClass:"k-system-info-box"},[e("k-empty",{attrs:{icon:"road-sign"}},[t._v("No redirects")])],1)]):t._e()],2)},h=[function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("thead",[e("tr",[e("th",{staticClass:"column-from"},[t._v("From")]),e("th",{staticClass:"column-to"},[t._v("To")]),e("th",{staticClass:"column-code"},[t._v("Code")]),e("th")])])}],y="";function v(t,r,e,s,a,d,c,b){var n=typeof t=="function"?t.options:t;r&&(n.render=r,n.staticRenderFns=e,n._compiled=!0),s&&(n.functional=!0),d&&(n._scopeId="data-v-"+d);var o;if(c?(o=function(i){i=i||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!i&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(i=__VUE_SSR_CONTEXT__),a&&a.call(this,i),i&&i._registeredComponents&&i._registeredComponents.add(c)},n._ssrRegister=o):a&&(o=b?function(){a.call(this,(n.functional?this.parent:this).$root.$options.shadowRoot)}:a),o)if(n.functional){n._injectStyles=o;var R=n.render;n.render=function(k,_){return o.call(_),R(k,_)}}else{var u=n.beforeCreate;n.beforeCreate=u?[].concat(u,o):[o]}return{exports:t,options:n}}const m={props:{label:String,multilang:Boolean,pageUuid:String,currentLang:String},data(){return{redirects:Array}},methods:{init:function(){fetch("/kirbyredirects/all").then(t=>t.json()).then(t=>{this.redirects=t}),this.pageUuid=this.$store.getters["content/values"]().uuid,this.currentLang=this.$language.code},deleteRedirect:function(t){fetch("/kirbyredirects/delete",{method:"DELETE",body:JSON.stringify({redirectId:t})}).then(r=>{let e=r.json();return r.status==200?e:e.then(Promise.reject.bind(Promise))}).then(r=>{this.redirects=r.redirects})}},computed:{currentRedirects:function(){var t=[];if(Array.isArray(this.redirects)){let r=function(s,a,d){return s.filter(c=>c.destId==a&&c.langCode==d)};t=Object.entries(this.redirects).map(s=>s[1]);var t=r(t,this.pageUuid,this.currentLang)}return t}},created(){this.init()}},l={};var p=v(m,f,h,!1,g,null,null,null);function g(t){for(let r in l)this[r]=l[r]}var C=function(){return p.exports}();panel.plugin("bvdputte/redirects",{fields:{redirects:C}})})();})();
